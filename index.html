<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jayasooriya Enterprises - Transport Management</title>
    <!-- Page Icon -->
    <link rel="icon" href="https://i.postimg.cc/g0rNcKpN/LOGO.png" type="image/png">
    <link rel="stylesheet" href="styles.css">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <!-- jsPDF libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
    <!-- Login Section -->
    <div id="loginSection" class="login-container">
        <div class="login-box">
            <img src="https://i.postimg.cc/g0rNcKpN/LOGO.png" alt="Jayasooriya Enterprises Logo" class="login-logo">
            <h2>JAYASOORIYA ENTERPRISES</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">Username:</label>
                    <input type="text" id="username" required>
                </div>
                <div class="form-group">
                    <label for="password">Password:</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit">Login</button>
                <p id="loginError" class="error-message"></p>
            </form>
        </div>
    </div>

    <!-- Main App Section (hidden by default) -->
    <div id="appSection" style="display: none;">
        <header>
            <!-- Company Name and Admin/Logout -->
            <div class="header-left">
                <span class="header-company-name">JAYASOORIYA ENTERPRISES - TRANSPORT MANAGEMENT SYSTEM</span>
            </div>
            <div class="header-right">
                <span class="admin-info"><i class="fas fa-user-tie"></i> Administrator</span>
                <button id="logoutBtn" class="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</button>
            </div>
        </header>

        <div class="app-container">
            <nav class="sidebar">
                <!-- Sidebar Header with Logo -->
                <div class="sidebar-header">
                    <img src="https://i.postimg.cc/g0rNcKpN/LOGO.png" alt="Jayasooriya Enterprises Logo" class="sidebar-logo">
                </div>
                <button id="vehiclesTab" class="active"><i class="fas fa-truck"></i> Vehicles</button>
                <button id="driversTab"><i class="fas fa-user"></i> Drivers</button>
                <button id="hiresTab"><i class="fas fa-clipboard-list"></i> Vehicle Hires</button>
            </nav>

            <main class="content-area">
                <!-- Vehicles Section -->
                <section id="vehiclesSection" class="active">
                    <div class="section-header">
                        <h2>Vehicle Management</h2>
                        <button id="addVehicleBtn" class="add-btn"><i class="fas fa-plus-circle"></i> Add Vehicle</button>
                    </div>
                    <p class="section-description">Manage your fleet vehicles and their details</p>
                    <div class="table-container">
                        <table id="vehiclesTable">
                            <thead>
                                <tr>
                                    <th>Vehicle Number</th>
                                    <th>Size (ft)</th>
                                    <th>Price per KM</th>
                                    <th>Ownership</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="vehiclesList">
                                <!-- Vehicles will be added here dynamically -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Drivers Section -->
                <section id="driversSection">
                    <div class="section-header">
                        <h2>Driver Management</h2>
                        <button id="addDriverBtn" class="add-btn"><i class="fas fa-plus-circle"></i> Add Driver</button>
                    </div>
                    <p class="section-description">Manage your drivers and their personal information</p>
                    <div class="table-container">
                        <table id="driversTable">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>License Number</th>
                                    <th>Age</th>
                                    <th>Address</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="driversList">
                                <!-- Drivers will be added here dynamically -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Hires Section -->
                <section id="hiresSection">
                    <div class="section-header">
                        <h2>Vehicle Hire Management</h2>
                        <button id="addHireBtn" class="add-btn"><i class="fas fa-plus-circle"></i> Add Hire</button>
                    </div>
                    <p class="section-description">Track and manage all vehicle hires</p>
                    <div class="table-container">
                        <div class="filter-container">
                            <label for="filterMonth">Filter by Month:</label>
                            <select id="filterMonth">
                                <option value="All">All Months</option>
                                <option value="January">January</option>
                                <option value="February">February</option>
                                <option value="March">March</option>
                                <option value="April">April</option>
                                <option value="May">May</option>
                                <option value="June">June</option>
                                <option value="July">July</option>
                                <option value="August">August</option>
                                <option value="September">September</option>
                                <option value="October">October</option>
                                <option value="November">November</option>
                                <option value="December">December</option>
                            </select>
                            <label for="filterVehicle">Filter by Vehicle:</label>
                            <select id="filterVehicle">
                                <option value="All">All Vehicles</option>
                            </select>
                            <button id="applyFilter"><i class="fas fa-filter"></i> Apply Filter</button>
                            <button id="exportPdfBtn" class="pdf-btn"><i class="fas fa-file-pdf"></i> Export PDF</button>
                        </div>
                        <table id="hiresTable">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Vehicle</th>
                                    <th>From</th>
                                    <th>To</th>
                                    <th>Distance (KM)</th>
                                    <th>Fuel (L)</th>
                                    <th>Fuel Price/L</th>
                                    <th>Fuel Cost</th>
                                    <th>Price/KM</th>
                                    <th>Hire Amount</th>
                                    <th>Driver</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="hiresList">
                                <!-- Hires will be added here dynamically -->
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td colspan="4">Total</td>
                                    <td id="totalDistance">0.0</td>
                                    <td colspan="2"></td>
                                    <td id="totalFuelCost">0.00</td>
                                    <td></td>
                                    <td id="totalHireAmount">0.00</td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr class="net-total">
                                    <td colspan="9">Net Profit</td>
                                    <td id="netProfit">0.00</td>
                                    <td></td>
                                    <td></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </section>
            </main>
        </div>

        <!-- Add Vehicle Modal -->
        <div id="addVehicleModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h3>Add New Vehicle</h3>
                <form id="vehicleForm">
                    <div class="form-group">
                        <label for="vehicleNumber">Vehicle Number:</label>
                        <input type="text" id="vehicleNumber" required>
                    </div>
                    <div class="form-group">
                        <label for="vehicleSize">Size (ft):</label>
                        <input type="text" id="vehicleSize" required>
                    </div>
                    <div class="form-group">
                        <label for="perKmPrice">Price per KM (LKR):</label>
                        <input type="number" id="perKmPrice" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="ownership">Ownership:</label>
                        <select id="ownership" required>
                            <option value="Company">Company Owned</option>
                            <option value="Rented">Rented</option>
                        </select>
                    </div>
                    <button type="submit"><i class="fas fa-plus-circle"></i> Add Vehicle</button>
                </form>
            </div>
        </div>

        <!-- Add Driver Modal -->
        <div id="addDriverModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h3>Add New Driver</h3>
                <form id="driverForm">
                    <div class="form-group">
                        <label for="driverName">Name:</label>
                        <input type="text" id="driverName" required>
                    </div>
                    <div class="form-group">
                        <label for="licenseNumber">License Number:</label>
                        <input type="text" id="licenseNumber" required>
                    </div>
                    <div class="form-group">
                        <label for="driverAge">Age:</label>
                        <input type="number" id="driverAge" required>
                    </div>
                    <div class="form-group">
                        <label for="driverAddress">Address:</label>
                        <textarea id="driverAddress" required></textarea>
                    </div>
                    <button type="submit"><i class="fas fa-plus-circle"></i> Add Driver</button>
                </form>
            </div>
        </div>

        <!-- Add Hire Modal -->
        <div id="addHireModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h3>Add New Hire</h3>
                <form id="hireForm">
                    <div class="form-group">
                        <label for="hireVehicle">Vehicle:</label>
                        <select id="hireVehicle" required>
                            <option value="">Select Vehicle</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="hireMonth">Month:</label>
                        <select id="hireMonth" required>
                            <option value="January">January</option>
                            <option value="February">February</option>
                            <option value="March">March</option>
                            <option value="April">April</option>
                            <option value="May">May</option>
                            <option value="June">June</option>
                            <option value="July">July</option>
                            <option value="August">August</option>
                            <option value="September">September</option>
                            <option value="October">October</option>
                            <option value="November">November</option>
                            <option value="December">December</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="fromLocation">From:</label>
                        <input type="text" id="fromLocation" required>
                    </div>
                    <div class="form-group">
                        <label for="toLocation">To:</label>
                        <input type="text" id="toLocation" required>
                    </div>
                    <div class="form-group">
                        <label for="distance">Distance (KM):</label>
                        <input type="number" id="distance" step="0.1" required>
                    </div>
                    <div class="form-group">
                        <label for="fuelLiters">Fuel (Liters):</label>
                        <input type="number" id="fuelLiters" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="fuelPricePerLiter">Fuel Price per Liter (LKR):</label>
                        <input type="number" id="fuelPricePerLiter" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="hireDate">Date:</label>
                        <input type="date" id="hireDate" required>
                    </div>
                    <div class="form-group">
                        <label for="hireDriver">Driver (Optional):</label>
                        <select id="hireDriver">
                            <option value="">Select Driver</option>
                        </select>
                    </div>
                    <button type="submit"><i class="fas fa-plus-circle"></i> Add Hire</button>
                </form>
            </div>
        </div>

        <!-- Edit Modals -->
        <div id="editVehicleModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h3>Edit Vehicle</h3>
                <form id="editVehicleForm">
                    <input type="hidden" id="editVehicleId">
                    <div class="form-group">
                        <label for="editVehicleNumber">Vehicle Number:</label>
                        <input type="text" id="editVehicleNumber" required>
                    </div>
                    <div class="form-group">
                        <label for="editVehicleSize">Size (ft):</label>
                        <input type="text" id="editVehicleSize" required>
                    </div>
                    <div class="form-group">
                        <label for="editPerKmPrice">Price per KM (LKR):</label>
                        <input type="number" id="editPerKmPrice" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="editOwnership">Ownership:</label>
                        <select id="editOwnership" required>
                            <option value="Company">Company Owned</option>
                            <option value="Rented">Rented</option>
                        </select>
                    </div>
                    <button type="submit"><i class="fas fa-sync-alt"></i> Update Vehicle</button>
                </form>
            </div>
        </div>

        <div id="editDriverModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h3>Edit Driver</h3>
                <form id="editDriverForm">
                    <input type="hidden" id="editDriverId">
                    <div class="form-group">
                        <label for="editDriverName">Name:</label>
                        <input type="text" id="editDriverName" required>
                    </div>
                    <div class="form-group">
                        <label for="editLicenseNumber">License Number:</label>
                        <input type="text" id="editLicenseNumber" required>
                    </div>
                    <div class="form-group">
                        <label for="editDriverAge">Age:</label>
                        <input type="number" id="editDriverAge" required>
                    </div>
                    <div class="form-group">
                        <label for="editDriverAddress">Address:</label>
                        <textarea id="editDriverAddress" required></textarea>
                    </div>
                    <button type="submit"><i class="fas fa-sync-alt"></i> Update Driver</button>
                </form>
            </div>
        </div>

        <div id="editHireModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h3>Edit Hire</h3>
                <form id="editHireForm">
                    <input type="hidden" id="editHireId">
                    <div class="form-group">
                        <label for="editHireVehicle">Vehicle:</label>
                        <select id="editHireVehicle" required>
                            <option value="">Select Vehicle</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editHireMonth">Month:</label>
                        <select id="editHireMonth" required>
                            <option value="January">January</option>
                            <option value="February">February</option>
                            <option value="March">March</option>
                            <option value="April">April</option>
                            <option value="May">May</option>
                            <option value="June">June</option>
                            <option value="July">July</option>
                            <option value="August">August</option>
                            <option value="September">September</option>
                            <option value="October">October</option>
                            <option value="November">November</option>
                            <option value="December">December</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editFromLocation">From:</label>
                        <input type="text" id="editFromLocation" required>
                    </div>
                    <div class="form-group">
                        <label for="editToLocation">To:</label>
                        <input type="text" id="editToLocation" required>
                    </div>
                    <div class="form-group">
                        <label for="editDistance">Distance (KM):</label>
                        <input type="number" id="editDistance" step="0.1" required>
                    </div>
                    <div class="form-group">
                        <label for="editFuelLiters">Fuel (Liters):</label>
                        <input type="number" id="editFuelLiters" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="editFuelPricePerLiter">Fuel Price per Liter (LKR):</label>
                        <input type="number" id="editFuelPricePerLiter" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="editHireDate">Date:</label>
                        <input type="date" id="editHireDate" required>
                    </div>
                    <div class="form-group">
                        <label for="editHireDriver">Driver (Optional):</label>
                        <select id="editHireDriver">
                            <option value="">Select Driver</option>
                        </select>
                    </div>
                    <button type="submit"><i class="fas fa-sync-alt"></i> Update Hire</button>
                </form>
            </div>
        </div>

        <footer>
            <p>&copy; 2025 Jayasooriya Enterprises. All rights reserved.</p>
        </footer>
    </div>

    <!-- Main JavaScript File -->
    <script src="app.js"></script>
</body>
</html>
